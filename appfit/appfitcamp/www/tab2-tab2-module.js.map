{"version":3,"sources":["webpack:///./src/app/pages/tab2/tab2.module.ts","webpack:///./src/app/pages/tab2/tab2.page.html","webpack:///./src/app/pages/tab2/tab2.page.scss","webpack:///./src/app/pages/tab2/tab2.page.ts","webpack:///./src/app/pipes/dom-sanitizer.pipe.ts","webpack:///./src/app/pipes/image-sanitizer.pipe.ts","webpack:///./src/app/pipes/imagen.pipe.ts","webpack:///./src/app/pipes/pipes.module.ts"],"names":[],"mappings":"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","file":"tab2-tab2-module.js","sourcesContent":["import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab2Page } from './tab2.page';\nimport { PipesModule } from '../../pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    PipesModule,\n    RouterModule.forChild([{ path: '', component: Tab2Page }])\n  ],\n  declarations: [Tab2Page]\n})\nexport class Tab2PageModule {}\n","module.exports = \"<ion-header no-border>\\n  <ion-toolbar>\\n    <ion-title>\\n      Nuevo Post\\n    </ion-title>\\n\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"crearPost()\\\"\\n                  [disabled]=\\\"post.mensaje.length < 1 || cargandoGeo\\\"\\n                  color=\\\"primary\\\">\\n        Compartir\\n      </ion-button>\\n    </ion-buttons>\\n\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n\\n  <ion-list>\\n    \\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Mensaje</ion-label>\\n      <ion-textarea [(ngModel)]=\\\"post.mensaje\\\"></ion-textarea>\\n    </ion-item>\\n\\n    <ion-list>\\n      <ion-item>\\n        <ion-label>Posición actual</ion-label>\\n        \\n        <ion-spinner name=\\\"lines-small\\\"\\n                     *ngIf=\\\"cargandoGeo\\\"></ion-spinner>\\n        <ion-toggle slot=\\\"end\\\"\\n                    [(ngModel)]=\\\"post.posicion\\\"\\n                    (ionChange)=\\\"getGeo()\\\"></ion-toggle>\\n      </ion-item>\\n    </ion-list>\\n\\n\\n  </ion-list>\\n\\n  <ion-row>\\n    <ion-col size=\\\"6\\\">\\n      <ion-button expand=\\\"full\\\"\\n                  shape=\\\"round\\\"\\n                  (click)=\\\"camara()\\\">\\n        <ion-icon slot=\\\"start\\\" name=\\\"camera\\\"></ion-icon>\\n        Cámara\\n      </ion-button>\\n    </ion-col>\\n    <ion-col size=\\\"6\\\">\\n      <ion-button expand=\\\"full\\\"\\n                  shape=\\\"round\\\"\\n                  (click)=\\\"libreria()\\\">\\n        <ion-icon slot=\\\"start\\\" name=\\\"images\\\"></ion-icon>\\n        Galería\\n      </ion-button>\\n    </ion-col>\\n  </ion-row>\\n  \\n  <ion-row>\\n    <ion-col size=\\\"3\\\" *ngFor=\\\"let image of tempImages\\\">\\n      <ion-card>\\n        <img [src]=\\\"image | imageSanitizer\\\">\\n      </ion-card>\\n    </ion-col>\\n  </ion-row>\\n\\n\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3RhYjIvdGFiMi5wYWdlLnNjc3MifQ== */\"","import { Component } from '@angular/core';\nimport { PostsService } from '../../services/posts.service';\nimport { Router } from '@angular/router';\n\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\n\ndeclare var window: any;\n\n@Component({\n  selector: 'app-tab2',\n  templateUrl: 'tab2.page.html',\n  styleUrls: ['tab2.page.scss']\n})\nexport class Tab2Page {\n\n  tempImages: string[] = [];\n  cargandoGeo = false;\n\n  post = {\n    mensaje: '',\n    coords: null,\n    posicion: false\n  };\n\n  constructor( private postsService: PostsService,\n               private route: Router,\n               private geolocation: Geolocation,\n               private camera: Camera ) { }\n\n  async crearPost() {\n\n    console.log(this.post);\n    const creado = await this.postsService.crearPost( this.post );\n\n    this.post = {\n      mensaje: '',\n      coords: null,\n      posicion: false\n    };\n\n    this.tempImages = [];\n\n    this.route.navigateByUrl('/main/tabs/tab1');\n\n  }\n\n  getGeo() {\n\n    if ( !this.post.posicion ) {\n      this.post.coords = null;\n      return;\n    }\n\n    this.cargandoGeo = true;\n\n    this.geolocation.getCurrentPosition().then((resp) => {\n      // resp.coords.latitude\n      // resp.coords.longitude\n      this.cargandoGeo = false;\n\n      const coords = `${ resp.coords.latitude },${ resp.coords.longitude }`;\n      console.log(coords);\n      this.post.coords = coords;\n\n\n     }).catch((error) => {\n       console.log('Error getting location', error);\n       this.cargandoGeo = false;\n     });\n\n\n  }\n\n  camara() {\n\n    const options: CameraOptions = {\n      quality: 60,\n      destinationType: this.camera.DestinationType.FILE_URI,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE,\n      correctOrientation: true,\n      sourceType: this.camera.PictureSourceType.CAMERA\n    };\n\n    this.procesarImagen( options );\n\n  }\n\n  libreria() {\n\n    const options: CameraOptions = {\n      quality: 60,\n      destinationType: this.camera.DestinationType.FILE_URI,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE,\n      correctOrientation: true,\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY\n    };\n\n    this.procesarImagen( options );\n\n  }\n\n\n  procesarImagen( options: CameraOptions ) {\n\n    this.camera.getPicture(options).then( ( imageData ) => {\n      // imageData is either a base64 encoded string or a file URI\n      // If it's base64 (DATA_URL):\n\n       const img = window.Ionic.WebView.convertFileSrc( imageData );\n\n      this.postsService.subirImagen( imageData );\n      this.tempImages.push( img );\n\n     }, (err) => {\n      // Handle error\n     });\n  }\n\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'domSanitizer'\n})\nexport class DomSanitizerPipe implements PipeTransform {\n\n  constructor( private domSanitizer: DomSanitizer ) { }\n\n  transform( img: string ): any {\n\n    const domImg = `background-image: url('${ img }')`;\n\n    return this.domSanitizer.bypassSecurityTrustStyle( domImg );\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'imageSanitizer'\n})\nexport class ImageSanitizerPipe implements PipeTransform {\n\n  constructor( private domSanitizer: DomSanitizer ) {}\n\n  transform( img: any ): any {\n    return  this.domSanitizer.bypassSecurityTrustUrl( img ) ;\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { environment } from '../../environments/environment';\n\nconst URL = environment.url;\n\n@Pipe({\n  name: 'imagen'\n})\nexport class ImagenPipe implements PipeTransform {\n\n  transform( img: string, userId: string): string {\n    return `${ URL }/posts/imagen/${ userId }/${ img }`;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DomSanitizerPipe } from './dom-sanitizer.pipe';\nimport { ImageSanitizerPipe } from './image-sanitizer.pipe';\nimport { ImagenPipe } from './imagen.pipe';\n\n@NgModule({\n  declarations: [\n    DomSanitizerPipe,\n    ImageSanitizerPipe,\n    ImagenPipe\n  ],\n  exports: [\n    DomSanitizerPipe,\n    ImageSanitizerPipe,\n    ImagenPipe\n  ]\n})\nexport class PipesModule { }\n"],"sourceRoot":""}